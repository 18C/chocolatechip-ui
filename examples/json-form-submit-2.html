<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0;">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Form</title>
    <link rel="stylesheet" href="chui/chui.css">
    <style>
    	tableview + tableview {
    		margin-top: 0 !important;
    	}
    	form > tableview > tablecell  {
    		display: -webkit-box !important;
    		-webkit-box-orient: horizontal !important;
    		-webkit-box-pack: start !important;
    		-webkit-box-align: start !important;
    	}
    	form tablecell > label {
    		display: block;
    		-webkit-box-sizing: border-box;
    		width: 100px;
    		text-align: right;
    		font-weight: bold;
    		padding-right: 10px;
    		font-size: 14px;
    		line-height: 22px;
    		color: #586B96;
    	}
    	form tablecell.ui-no-hover:hover > label,
    	form tablecell.ui-no-hover:hover > input,
    	form tablecell.ui-no-hover:hover > textarea {
    		color: #000 !important;
    	}
    	form tablecell > label > span.warning {
    		color: red;
    	}
    	form tablecell > input, form tablecell > textarea {
    		-webkit-appearance: none;
    		border: none;
    		outline: none;
    		font-size: 16px;
    		padding: 0;
    		width: 175px;
    	}
    	form button[type=submit] {
    		display: none;
    	}
    </style>
    <script src="chui/chocolatechip.js"></script>
    <script src="chui/chui.js"></script>
    <script>
        function submitForm() {
            var formData = $.form2JSON('#userForm');
            var data = JSON.stringify(formData);
            window.location = "json_form_target.html?" + data;
        }
        $.ready(function() {
        	/*$.extend($, {
        		serialize : function(form) {
					if (!form || form.nodeName !== "FORM") {
						return;
					}
					var i, j, q = [];
					for (i = form.elements.length - 1; i >= 0; i = i - 1) {
						if (form.elements[i].name === "") {
							continue;
						}
						switch (form.elements[i].nodeName) {
						case 'INPUT':
							switch (form.elements[i].type) {
							case 'text':
							case 'hidden':
							case 'password':
							case 'button':
							case 'reset':
							case 'submit':
								q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
								break;
							case 'checkbox':
							case 'radio':
								if (form.elements[i].checked) {
									q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
								}						
								break;
							case 'file':
								break;
							}
							break;			 
						case 'TEXTAREA':
							q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
							break;
						case 'SELECT':
							switch (form.elements[i].type) {
							case 'select-one':
								q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
								break;
							case 'select-multiple':
								for (j = form.elements[i].options.length - 1; j >= 0; j = j - 1) {
									if (form.elements[i].options[j].selected) {
										q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].options[j].value));
									}
								}
								break;
							}
							break;
						case 'BUTTON':
							switch (form.elements[i].type) {
							case 'reset':
							case 'submit':
							case 'button':
								q.push(form.elements[i].name + "=" + encodeURIComponent(form.elements[i].value));
								break;
							}
							break;
						}
					}
					return q.join("&");
				}
			}); */
        	/*$$("form input").forEach(function(input) {
        		input.bind("click", function() {
        			input.focus();
        		});
        	});
        	$$("form textarea").forEach(function(textarea) {
        		textarea.bind("click", function() {
        			textarea.focus();
        		});
        	}); */
        	/*var cancelInfoForm = function() {
        		var parent = $.UINavigationHistory[$.UINavigationHistory.length-1];
                $.UINavigationHistory.pop();
                $($.UINavigationHistory[$.UINavigationHistory.length-1])
                .setAttribute("ui-navigation-status", "current");
                $(parent).setAttribute("ui-navigation-status", "upcoming");
                $.UIHideURLbar();
                if ($.app.getAttribute("ui-kind")==="navigation-with-one-navbar" && $.UINavigationHistory[$.UINavigationHistory.length-1] === "#main") {
                	$("navbar > uibutton[ui-implements=back]", $.app).css("{display: none;}");
                }
            };
            /*$("#new_user > navbar > uibutton[ui-implements=cancel]").bind("click", function() {
            	cancelInfoForm();
            }); */
         /*   $("#submitPersonalInfo").bind("click", function() {
            	alert($.serialize($("#personalInfo")));
            	//alert("Form submitted!");
            });
            $("#main > navbar > uibutton[ui-implements=done]").bind("click", function() {
            	$("#submitPersonalInfo").trigger("click");
            });
                    function submitForm() {
            var formData = $.form2JSON('#userForm');
            var data = JSON.stringify(formData);
            window.location = "json_form_target.html?" + data;
        }*/

       // $(function() {
		    $("uibutton[ui-implements=done]").bind("click", function() {
		        $("#userForm").submit();
		    });
		//});
		});
    </script>
    
</head>
<body>
	<app>
		<view id="main" ui-background-style="striped" ui-navigation-status="current">
			<navbar>
				<uibutton ui-implements="cancel" ui-bar-align="left">Cancel</uibutton>
				<h1>Tableview</h1>
				<uibutton ui-implements="done" ui-bar-align="right">Done</uibutton>
			</navbar>
			<subview ui-associations="withNavBar">
				<scrollpanel>
					<form id="userForm" action="javascript:submitForm()">
						<button type="submit" id="submitPersonalInfo" name="submitPersonalInfo">Submit</button>
						<tableview ui-kind="grouped">
							<tablecell class="ui-no-hover"><label>Name <span class="warning">*</span></label><input type="text" placeholder="First Name"  name="user.name.first"></tablecell>
							<tablecell class="ui-no-hover"><label></label><input type="text" placeholder="Last Name"  name="user.name.last">			
							</tablecell>
						</tableview>
						<tableview ui-kind="grouped">
							<tablecell class="ui-no-hover"><label>Email <span class="warning">*</span></label><input type="text" placeholder="joe@me.com" name="user.email">
							</tablecell>
						</tableview>
						<tableview ui-kind="grouped">
							<tablecell class="ui-no-hover"><label>Telephone <span class="warning">*</span></label><input type="text" placeholder="000-000-0000" name="user.phone">
							</tablecell>
						</tableview>
						<tableview ui-kind="grouped">
							<tablecell class="ui-no-hover"><label>Message </label><textarea rows="8" cols="100" placeholder="Your message goes here." name="user.message"></textarea>
							</tablecell>
						</tableview>
					</form>		
				</scrollpanel>
			</subview>
		</view>
	</app>
</body>
</html>