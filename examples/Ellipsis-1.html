<!DOCTYPE html>
<html lang="en" id="htmlID" class="htmlClass">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="apple-touch-startup-image" href="startup.png">
	<link rel="apple-touch-icon" href="chocolatechip-icon.png"/>
	<link rel="shortcut icon" href="favicon.ico">
	<title>Application of Ellipsis to a Paragraph</title>
	<link rel="stylesheet" href="chui/chui.css">
	<style type="text/css">
		/* Local Styles Here */
		#clip {
			display: -webkit-box;
			-webkit-box-orient: vertical;
			overflow : hidden;
			text-overflow: ellipsis;
			height: 200px;
		}
		p {
			font-size: 14px;
			line-height: 20px;
		}
		panel {
			padding: 20px;
		}		
	</style>
	<script src="chui/chocolatechip.js" type="text/javascript"></script>
	<script src="chui/chui.js" type="text/javascript"></script>
	<script type="text/javascript">
		$.ready(function() {
			$.extend(HTMLElement.prototype, {
				calculateNumberOfLines : function () {
					var lineHeight = parseInt(this.css("line-height"));
					var height = parseInt(this.css("height"));
					var lineNums = Math.floor(height / lineHeight);
					return lineNums;
				},
				applyEllipsis : function () {
					var lines = this.calculateNumberOfLines();
					this.css("{-webkit-line-clamp:" + lines + "}");
				}
			});
			var clipParag = $("#clip");
			clipParag.applyEllipsis();
			window.onresize = function(e) {
				if (clipParag.UICheckForOverflow()) {
					clipParag.applyEllipsis();
				}
			};
		});
	</script>
</head>
<body>
	<app>
		<view id="main" ui-background-style="striped" ui-navigation-status="current">
			<navbar id="toolbar_01">
				<h1 ui-bar-align="center">Ellipsis</h1>
			</navbar>
			<subview ui-associations="withNavBar">
				<scrollpanel>
					<panel>
					<p>This is an example of automatic application of ellipsis. The script checks the height of the text container to see if there is overflow. If there is, it calculates the number of lines of text and then applies a webkit-line-clamp value on the text to produce a ellipsis on the paragraph. The clipping is dynamic in that if the height of the text is changed, the clipping and ellipsis will be based on that new height. The only requirement is that a specific line-height be set on the text that you wish to clip.</p>
					<p><strong>Note:</strong> You cannot put padding on text that you intend to clip as this prevents the clipping from functioning properly, apparently a bug in the Webkit implementation of line-clamp which causes the text-overflow to show. If you need padding, try using margins or else wrap the text in another element, as I have here.</p>
					<p id="clip">
					Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum
					</p>
					</panel>
				</scrollpanel>
			</subview>
		</view>
		
	</app>
</body>
</html>
