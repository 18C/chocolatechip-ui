/*
ChocolateChip-UI
Copyright 2011 Robert Biggs: www.chocolatechip-ui.com
License: BSD
Version: 0.8.6 beta
*/
const CHUIVersion="0.8.6 beta";const UIExpectedChocolateChipJSVersion="1.1.6";UICheckChocolateChipJSVersion=function(){if($.version!==UIExpectedChocolateChipJSVersion){console.error("This version of ChocolateChip-UI requries ChococlateChip.js version "+UIExpectedChocolateChipJSVersion+"!");console.error("The version of ChocolateChip.js which you are using is: "+$.version);console.error("ChocolateChip.js has been disabled until this problem is resolved.");window.$=null}};UICheckChocolateChipJSVersion();$.ready(function(){$.body=$("body");$.app=$("app");$.main=$("#main");$.views=$$("view")});$.tablet=false;if(window.innerWidth>600){$.tablet=true}$.extend($,{UIUuidSeed:function(a){if(a){return(((1+Math.random())*0x10000)|0).toString(a).substring(1)}else{return(((1+Math.random())*0x10000)|0).toString(16).substring(1)}},AlphaSeed:function(){var a="";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";a+=b.charAt(Math.floor(Math.random()*b.length));return a},UIUuid:function(){return($.AlphaSeed()+$.UIUuidSeed(20)+$.UIUuidSeed()+"-"+$.UIUuidSeed()+"-"+$.UIUuidSeed()+"-"+$.UIUuidSeed()+"-"+$.UIUuidSeed()+$.UIUuidSeed()+$.UIUuidSeed())},resetApp:function(b){if(b==="hard"){window.location.reload(true)}else{$.views.forEach(function(a){a.setAttribute("ui-navigation-status","upcoming")});$.main.setAttribute("ui-navigation-status","current");$.UINavigationHistory=["#main"]}}});$.extend(HTMLElement.prototype,{UIIdentifyChildNodes:function(){var a=this.childElementCount;for(var i=0;i<a;i++){this.children[i].setAttribute("ui-child-position",i)}}});$.extend($,{UITouchedButton:null,UIButton:function(){$.app.delegate("uibutton","touchstart",function(a){if(!$.UITouchedButton){if(!a.hasClass("disabled")){$.UITouchedButton=a;a.addClass("touched")}else{return false}}else{if(!a.hasClass("disabled")){$.UITouchedButton.removeClass("touched");$.UITouchedButton=a;a.addClass("touched")}else{return false}}})},UINavigationHistory:["#main"],UINavigateBack:function(){var a=$.UINavigationHistory[$.UINavigationHistory.length-1];$.UINavigationHistory.pop();$($.UINavigationHistory[$.UINavigationHistory.length-1]).setAttribute("ui-navigation-status","current");$(a).setAttribute("ui-navigation-status","upcoming");$.UIHideURLbar();if($.app.getAttribute("ui-kind")==="navigation-with-one-navbar"&&$.UINavigationHistory[$.UINavigationHistory.length-1]==="#main"){$("navbar > uibutton[ui-implements=back]",$.app).css("{display: none;}")}},UIBackNavigation:function(){$.app.delegate("uibutton","click",function(a){if(a.getAttribute("ui-implements")==="back"){$.UINavigateBack()}});$.app.delegate("uibutton","touchstart",function(a){if(a.getAttribute("ui-implements")==="back"){$.UINavigateBack()}})},UIDoubleTapDelta:700,UIDoubleTapTimer:null,UIDoubleTapFunction1:null,UIDoubleTapFunction2:null,UIDoubleTapTimeout:function(){$.UIDoubleTapFunction1();$.UIDoubleTapTimer=null},UIDoubleTap:function(a,b){if($.UIDoubleTapTimer===null){$.UIDoubleTapTimer=setTimeout($.UIDoubleTapTimeout,$.UIDoubleTapDelta);$.UIDoubleTapFunction1=a;$.UIDoubleTapFunction2=b}else{$.UIDoubleTapTimer=null;$.UIDoubleTapFunction2()}},UIFirstTapTime:0,UINavigationList:function(){$.app.delegate("tablecell","click",function(c){setTimeout(function(){var b=function(a){if($.app.getAttribute("ui-kind")==="navigation-with-one-navbar"){$("navbar > uibutton[ui-implements=back]",$.app).css("{display: block;}")}$(a.getAttribute("href")).setAttribute("ui-navigation-status","current");$($.UINavigationHistory[$.UINavigationHistory.length-1]).setAttribute("ui-navigation-status","traversed");if($("#main").getAttribute("ui-navigation-status")!=="traversed"){$("#main").setAttribute("ui-navigation-status","traversed")}$.UINavigationHistory.push(a.getAttribute("href"));$.UIHideURLbar()};if(c.hasAttribute("href")){if($.UIFirstTapTime===0){b(c);$.UIFirstTapTime=new Date().getTime()}else if((new Date().getTime()-$.UIFirstTapTime)>=2500){$.UIFirstTapTime=0;b(c)}else if($.UIFirstTapTime>0){if($.ipad){if((new Date().getTime()-$.UIFirstTapTime)<2500){$.UIFirstTapTime=0;return false}}if((new Date().getTime()-$.UIFirstTapTime)<2000){$.UIFirstTapTime=0;return false}else{b(c)}}}},50)})},UITouchedTableCell:null,UITableview:function(){$.app.delegate("tablecell","touchstart",function(a){if(!$.UITouchedTableCell){$.UITouchedTableCell=a;a.addClass("touched")}else{$.UITouchedTableCell.removeClass("touched");a.addClass("touched");$.UITouchedTableCell=a}})}});$.ready(function(){$.UIButton();$.UIBackNavigation();$.UINavigationList();$.UITableview();$.app.delegate("input","click",function(a){a.focus()});$.app.delegate("input","touchstart",function(a){a.focus()});$.app.delegate("textarea","click",function(a){a.focus()});$.app.delegate("textarea","touchstart",function(a){a.focus()})});$.extend(HTMLElement.prototype,{UIToggleButtonLabel:function(a,b){if($("label",this).text()===a){$("label",this).text(b)}else{$("label",this).text(a)}}});$.UISupports3d=('WebKitCSSMatrix'in window&&'m11'in new WebKitCSSMatrix());$.UISupportsTouch=('ontouchstart'in window);$.UISupportsGestures=('ongesturestart'in window);$.UISupportsCompositing=('WebKitTransitionEvent'in window);$.UIisIDevice=((/iphone|ipad|ipod/gi).test(navigator.appVersion));$.UIisAndroid=((/android/gi).test(navigator.appVersion));$.UIResizeEvt=('onorientationchange'in window?'orientationchange':'resize');$.UIStartEvt=($.UISupportsTouch?'touchstart':'mousedown');$.UIMoveEvt=($.UISupportsTouch?'touchmove':'mousemove');$.UIEndEvt=($.UISupportsTouch?'touchend':'mouseup');$.UICancelEvt=($.UISupportsTouch?'touchcancel':'mouseup');$.UITransOpen=('translate'+($.UISupports3d?'3d(':'('));$.UITransClose=($.UISupports3d?',0)':')');$.extend($,{UIScroll:function(a,b){var c=this;var d=document;var e=null;var i=null;c.wrapper=(typeof a=='object'?a:$(a).parentNode);c.wrapper.style.overflow='hidden';c.scroller=c.wrapper.children[0];c.options={HWTransition:true,HWCompositing:true,hScroll:true,vScroll:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:$.UIisAndroid,fadeScrollbar:($.UIisIDevice&&$.UISupports3d)||!$.UISupportsTouch,hideScrollbar:$.UIisIDevice||!$.UISupportsTouch,scrollbarClass:'',bounce:$.UISupports3d,bounceLock:false,momentum:$.UISupports3d,lockDirection:true,zoom:false,zoomMin:1,zoomMax:4,snap:false,pullToRefresh:false,pullDownLabel:['Pull down to refresh...','Release to refresh...','Loading...'],pullUpLabel:['Pull up to refresh...','Release to refresh...','Loading...'],onPullDown:function(){},onPullUp:function(){},onScrollStart:null,onScrollEnd:null,onZoomStart:null,onZoomEnd:null,checkDOMChange:false};for(i in b){c.options[i]=b[i]}c.options.HWCompositing=c.options.HWCompositing&&$.UISupportsCompositing;c.options.HWTransition=c.options.HWTransition&&$.UISupportsCompositing;if(c.options.HWCompositing){c.scroller.style.cssText+='-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:'+$.UITransOpen+'0,0'+$.UITransClose}else{c.scroller.style.cssText+='-webkit-transition-property:top,left;-webkit-transform-origin:0 0;top:0;left:0'}if(c.options.HWTransition){c.scroller.style.cssText+='-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;'}c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar;c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar;c.pullDownToRefresh=c.options.pullToRefresh=='down'||c.options.pullToRefresh=='both';c.pullUpToRefresh=c.options.pullToRefresh=='up'||c.options.pullToRefresh=='both';if(c.pullDownToRefresh){e=d.createElement('div');e.className='iScrollPullDown';e.innerHTML='<span class="iScrollPullDownIcon"></span><span class="iScrollPullDownLabel">'+c.options.pullDownLabel[0]+'</span>\n';c.scroller.insertBefore(e,c.scroller.children[0]);c.options.bounce=true;c.pullDownEl=e;c.pullDownLabel=e.getElementsByTagName('span')[1]}if(c.pullUpToRefresh){e=d.createElement('div');e.className='iScrollPullUp';e.innerHTML='<span class="iScrollPullUpIcon"></span><span class="iScrollPullUpLabel">'+c.options.pullUpLabel[0]+'</span>\n';c.scroller.appendChild(e);c.options.bounce=true;c.pullUpEl=e;c.pullUpLabel=e.getElementsByTagName('span')[1]}c.refresh();c._bind($.UIResizeEvt,window);c._bind($.UIStartEvt);if($.UISupportsGestures&&c.options.zoom){c._bind('gesturestart');c.scroller.style.webkitTransform=c.scroller.style.webkitTransform+' scale(1)'}if(!$.UISupportsTouch){c._bind('mousewheel')}if(c.options.checkDOMChange){c.DOMChangeInterval=setInterval(function(){c._checkSize()},250)}}});$.UIScroll.prototype={x:0,y:0,currPageX:0,currPageY:0,pagesX:[],pagesY:[],offsetBottom:0,offsetTop:0,scale:1,lastScale:1,contentReady:true,handleEvent:function(e){var a=this;if(e.target.tagName!="SELECT"){e.preventDefault();e.stopPropagation()}switch(e.type){case $.UIStartEvt:a._start(e);break;case $.UIMoveEvt:a._move(e);break;case $.UIEndEvt:;case $.UICancelEvt:a._end(e);break;case'webkitTransitionEnd':a._transitionEnd(e);break;case $.UIResizeEvt:a._resize();break;case'gesturestart':a._gestStart(e);break;case'gesturechange':a._gestChange(e);break;case'gestureend':case'gesturecancel':a._gestEnd(e);break;case'mousewheel':a._wheel(e);break}},_scrollbar:function(a){var b=this;var c=document;var d=null;if(!b[a+'Scrollbar']){if(b[a+'ScrollbarWrapper']){b[a+'ScrollbarIndicator'].style.webkitTransform='';b[a+'ScrollbarWrapper'].parentNode.removeChild(b[a+'ScrollbarWrapper']);b[a+'ScrollbarWrapper']=null;b[a+'ScrollbarIndicator']=null}return}if(!b[a+'ScrollbarWrapper']){d=c.createElement('div');if(b.options.scrollbarClass){d.className=b.options.scrollbarClass+a.toUpperCase()}else{d.style.cssText='position:absolute;z-index:100;'+(a=='h'?'height:7px;bottom:1px;left:2px;right:7px':'width:7px;bottom:7px;top:2px;right:1px')}d.style.cssText+='pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:'+(b.options.fadeScrollbar?'350ms':'0')+';overflow:hidden;opacity:'+(b.options.hideScrollbar?'0':'1');b.wrapper.appendChild(d);b[a+'ScrollbarWrapper']=d;d=c.createElement('div');if(!b.options.scrollbarClass){d.style.cssText='position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;'+(a=='h'?'height:100%;-webkit-border-radius:4px 3px;':'width:100%;-webkit-border-radius:3px 4px;')}d.style.cssText+='pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:'+$.UITransOpen+'0,0'+$.UITransClose;b[a+'ScrollbarWrapper'].appendChild(d);b[a+'ScrollbarIndicator']=d}if(a=='h'){b.hScrollbarSize=b.hScrollbarWrapper.clientWidth;b.hScrollbarIndicatorSize=Math.max(Math.round(b.hScrollbarSize*b.hScrollbarSize/b.scrollerW),8);b.hScrollbarIndicator.style.width=b.hScrollbarIndicatorSize+'px';b.hScrollbarMaxScroll=b.hScrollbarSize-b.hScrollbarIndicatorSize;b.hScrollbarProp=b.hScrollbarMaxScroll/b.maxScrollX}else{b.vScrollbarSize=b.vScrollbarWrapper.clientHeight;b.vScrollbarIndicatorSize=Math.max(Math.round(b.vScrollbarSize*b.vScrollbarSize/b.scrollerH),8);b.vScrollbarIndicator.style.height=b.vScrollbarIndicatorSize+'px';b.vScrollbarMaxScroll=b.vScrollbarSize-b.vScrollbarIndicatorSize;b.vScrollbarProp=b.vScrollbarMaxScroll/b.maxScrollY}b._indicatorPos(a,true)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_checkSize:function(){var a=this;var b=null;var c=null;if(a.moved||a.zoomed||!a.contentReady)return;b=Math.round(a.scroller.offsetWidth*a.scale);c=Math.round((a.scroller.offsetHeight-a.offsetBottom-a.offsetTop)*a.scale);if(b==a.scrollerW&&c==a.scrollerH)return;a.refresh()},_pos:function(x,y){var a=this;a.x=a.hScroll?x:0;a.y=a.vScroll?y:0;a.scroller.style.webkitTransform=$.UITransOpen+a.x+'px,'+a.y+'px'+$.UITransClose+' scale('+a.scale+')';a._indicatorPos('h');a._indicatorPos('v')},_indicatorPos:function(a,b){var c=this;var d=a=='h'?c.x:c.y;if(!c[a+'Scrollbar'])return;d=c[a+'ScrollbarProp']*d;if(d<0){d=c.options.fixedScrollbar?0:d+d*3;if(c[a+'ScrollbarIndicatorSize']+d<9)d=-c[a+'ScrollbarIndicatorSize']+8}else if(d>c[a+'ScrollbarMaxScroll']){d=c.options.fixedScrollbar?c[a+'ScrollbarMaxScroll']:d+(d-c[a+'ScrollbarMaxScroll'])*3;if(c[a+'ScrollbarIndicatorSize']+c[a+'ScrollbarMaxScroll']-d<9)d=c[a+'ScrollbarIndicatorSize']+c[a+'ScrollbarMaxScroll']-8}c[a+'ScrollbarWrapper'].style.webkitTransitionDelay='0';c[a+'ScrollbarWrapper'].style.opacity=b&&c.options.hideScrollbar?'0':'1';c[a+'ScrollbarIndicator'].style.webkitTransform=$.UITransOpen+(a=='h'?d+'px,0':'0,'+d+'px')+$.UITransClose},_transitionTime:function(a){var b=this;a+='ms';b.scroller.style.webkitTransitionDuration=a;if(b.hScrollbar)b.hScrollbarIndicator.style.webkitTransitionDuration=a;if(b.vScrollbar)b.vScrollbarIndicator.style.webkitTransitionDuration=a},_start:function(e){var a=this;var b=$.UISupportsTouch?e.changedTouches[0]:e;var c=null;a.moved=false;e.preventDefault();if($.UISupportsTouch&&e.touches.length==2&&a.options.zoom&&$.UISupportsGestures&&!a.zoomed){a.originX=Math.abs(e.touches[0].pageX+e.touches[1].pageX-a.wrapperOffsetLeft*2)/2-a.x;a.originY=Math.abs(e.touches[0].pageY+e.touches[1].pageY-a.wrapperOffsetTop*2)/2-a.y}a.moved=false;a.distX=0;a.distY=0;a.absDistX=0;a.absDistY=0;a.dirX=0;a.dirY=0;a.returnTime=0;a._transitionTime(0);if(a.options.momentum){if(a.scrollInterval){clearInterval(a.scrollInterval);a.scrollInterval=null}if(a.options.HWCompositing){c=new WebKitCSSMatrix(window.getComputedStyle(a.scroller,null).webkitTransform);if(c.m41!=a.x||c.m42!=a.y){a._unbind('webkitTransitionEnd');a._pos(c.m41,c.m42)}}else{c=window.getComputedStyle(a.scroller,null);if(a.x+'px'!=c.left||a.y+'px'!=c.top){a._unbind('webkitTransitionEnd');a._pos(c.left.replace(/[^0-9]/g)*1,c.top.replace(/[^0-9]/g)*1)}}}a.scroller.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.66,0.66,1)';if(a.hScrollbar)a.hScrollbarIndicator.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.66,0.66,1)';if(a.vScrollbar)a.vScrollbarIndicator.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.66,0.66,1)';a.startX=a.x;a.startY=a.y;a.pointX=b.pageX;a.pointY=b.pageY;a.startTime=e.timeStamp;if(a.options.onScrollStart){a.options.onScrollStart.call(a)}a._bind($.UIMoveEvt);a._bind($.UIEndEvt)},_move:function(e){if($.UISupportsTouch&&e.touches.length>1)return;var a=this;var b=$.UISupportsTouch?e.changedTouches[0]:e;var c=b.pageX-a.pointX;var d=b.pageY-a.pointY;var f=a.x+c;var g=a.y+d;e.preventDefault();a.pointX=b.pageX;a.pointY=b.pageY;if(f>0||f<a.maxScrollX){f=a.options.bounce?a.x+(c/2.4):f>=0||a.maxScrollX>=0?0:a.maxScrollX}if(g>0||g<a.maxScrollY){g=a.options.bounce?a.y+(d/2.4):g>=0||a.maxScrollY>=0?0:a.maxScrollY;if(a.options.pullToRefresh&&a.contentReady){if(a.pullDownToRefresh&&g>a.offsetBottom){a.pullDownEl.className='iScrollPullDown flip';a.pullDownLabel.innerText=a.options.pullDownLabel[1]}else if(a.pullDownToRefresh&&a.pullDownEl.className.match('flip')){a.pullDownEl.className='iScrollPullDown';a.pullDownLabel.innerText=a.options.pullDownLabel[0]}if(a.pullUpToRefresh&&g<a.maxScrollY-a.offsetTop){a.pullUpEl.className='iScrollPullUp flip';a.pullUpLabel.innerText=a.options.pullUpLabel[1]}else if(a.pullUpToRefresh&&a.pullUpEl.className.match('flip')){a.pullUpEl.className='iScrollPullUp';a.pullUpLabel.innerText=a.options.pullUpLabel[0]}}}if(a.absDistX<4&&a.absDistY<4){a.distX+=c;a.distY+=d;a.absDistX=Math.abs(a.distX);a.absDistY=Math.abs(a.distY);return}if(a.options.lockDirection){if(a.absDistX>a.absDistY+3){g=a.y;d=0}else if(a.absDistY>a.absDistX+3){f=a.x;c=0}}a.moved=true;a._pos(f,g);a.dirX=c>0?-1:c<0?1:0;a.dirY=d>0?-1:d<0?1:0;if(e.timeStamp-a.startTime>300){a.startTime=e.timeStamp;a.startX=a.x;a.startY=a.y}},_end:function(e){if($.UISupportsTouch&&e.touches.length!=0)return;var a=this;var b=$.UISupportsTouch?e.changedTouches[0]:e;var c,ev;var d={dist:0,time:0};var f={dist:0,time:0};var g=e.timeStamp-a.startTime;var h=a.x;var i=a.y;var j;var k;a._unbind($.UIMoveEvt);a._unbind($.UIEndEvt);a._unbind($.UICancelEvt);if(a.zoomed)return;if(!a.moved){if($.UISupportsTouch){if(a.doubleTapTimer&&a.options.zoom){clearTimeout(a.doubleTapTimer);a.doubleTapTimer=null;a.zoom(a.pointX,a.pointY,a.scale==1?2:1)}else{a.doubleTapTimer=setTimeout(function(){a.doubleTapTimer=null;c=b.target;while(c.nodeType!=1){c=c.parentNode}ev=document.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,b.screenX,b.screenY,b.clientX,b.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;c.dispatchEvent(ev)},a.options.zoom?250:0)}}a._resetPos();return}if(a.pullDownToRefresh&&a.contentReady&&a.pullDownEl.className.match('flip')){a.pullDownEl.className='iScrollPullDown loading';a.pullDownLabel.innerText=a.options.pullDownLabel[2];a.scroller.style.marginTop='0';a.offsetBottom=0;a.refresh();a.contentReady=false;a.options.onPullDown()}if(a.pullUpToRefresh&&a.contentReady&&a.pullUpEl.className.match('flip')){a.pullUpEl.className='iScrollPullUp loading';a.pullUpLabel.innerText=a.options.pullUpLabel[2];a.scroller.style.marginBottom='0';a.offsetTop=0;a.refresh();a.contentReady=false;a.options.onPullUp()}if(g<300&&a.options.momentum){d=h?a._momentum(h-a.startX,g,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):d;f=i?a._momentum(i-a.startY,g,-a.y,(a.maxScrollY<0?a.scrollerH-a.wrapperH+a.y:0),a.options.bounce?a.wrapperH:0):f;h=a.x+d.dist;i=a.y+f.dist;if((a.x>0&&h>0)||(a.x<a.maxScrollX&&h<a.maxScrollX))d={dist:0,time:0};if((a.y>0&&i>0)||(a.y<a.maxScrollY&&i<a.maxScrollY))f={dist:0,time:0}}if(d.dist||f.dist){j=Math.max(Math.max(d.time,f.time),10);if(a.options.snap){k=a._snap(h,i);h=k.x;i=k.y;j=Math.max(k.time,j)}a.scrollTo(h,i,j);return}if(a.options.snap){k=a._snap(a.x,a.y);if(k.x!=a.x||k.y!=a.y){a.scrollTo(k.x,k.y,k.time)}return}a._resetPos()},_resetPos:function(a){var b=this;var c=b.x;var d=b.y;if(b.x>=0)c=0;else if(b.x<b.maxScrollX)c=b.maxScrollX;if(b.y>=0||b.maxScrollY>0)d=0;else if(b.y<b.maxScrollY)d=b.maxScrollY;if(c==b.x&&d==b.y){if(b.moved){if(b.options.onScrollEnd)b.options.onScrollEnd.call(b);b.moved=false}if(b.zoomed){if(b.options.onZoomEnd)b.options.onZoomEnd.call(b);b.zoomed=false}if(b.hScrollbar&&b.options.hideScrollbar){b.hScrollbarWrapper.style.webkitTransitionDelay='300ms';b.hScrollbarWrapper.style.opacity='0'}if(b.vScrollbar&&b.options.hideScrollbar){b.vScrollbarWrapper.style.webkitTransitionDelay='300ms';b.vScrollbarWrapper.style.opacity='0'}return}if(a===undefined)a=200;if(a){b.scroller.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.0,0.33,1)';if(b.hScrollbar)b.hScrollbarIndicator.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.0,0.33,1)';if(b.vScrollbar)b.vScrollbarIndicator.style.webkitTransitionTimingFunction='cubic-bezier(0.33,0.0,0.33,1)'}b.scrollTo(c,d,a)},_timedScroll:function(b,c,d){var e=this;var f=e.x;var g=e.y;var h=(new Date()).getTime();var i;e._transitionTime(0);if(e.scrollInterval){clearInterval(e.scrollInterval);e.scrollInterval=null}e.scrollInterval=setInterval(function(){var a=(new Date()).getTime(),newX,newY;if(a>=h+d){clearInterval(e.scrollInterval);e.scrollInterval=null;e._pos(b,c);e._transitionEnd();return}a=(a-h)/d-1;i=Math.sqrt(1-a*a);newX=(b-f)*i+f;newY=(c-g)*i+g;e._pos(newX,newY)},20)},_transitionEnd:function(e){var a=this;if(e)e.stopPropagation();a._unbind('webkitTransitionEnd');a._resetPos(a.returnTime);a.returnTime=0},_gestStart:function(e){var a=this;a._transitionTime(0);a.lastScale=1;if(a.options.onZoomStart)a.options.onZoomStart.call(a);a._unbind('gesturestart');a._bind('gesturechange');a._bind('gestureend');a._bind('gesturecancel')},_gestChange:function(e){var a=this;var b=a.scale*e.scale;var x,y,relScale;a.zoomed=true;if(b<a.options.zoomMin)b=a.options.zoomMin;else if(b>a.options.zoomMax)b=a.options.zoomMax;relScale=b/a.scale;x=a.originX-a.originX*relScale+a.x;y=a.originY-a.originY*relScale+a.y;a.scroller.style.webkitTransform=$.UITransOpen+x+'px,'+y+'px'+$.UITransClose+' scale('+b+')';a.lastScale=relScale},_gestEnd:function(e){var a=this;var b=a.scale;var c=a.lastScale;a.scale=b*c;if(a.scale<a.options.zoomMin+0.05)a.scale=a.options.zoomMin;else if(a.scale>a.options.zoomMax-0.05)a.scale=a.options.zoomMax;c=a.scale/b;a.x=a.originX-a.originX*c+a.x;a.y=a.originY-a.originY*c+a.y;a.scroller.style.webkitTransform=$.UITransOpen+a.x+'px,'+a.y+'px'+$.UITransClose+' scale('+a.scale+')';setTimeout(function(){a.refresh()},0);a._bind('gesturestart');a._unbind('gesturechange');a._unbind('gestureend');a._unbind('gesturecancel')},_wheel:function(e){var a=this;var b=a.x+e.wheelDeltaX/12;var c=a.y+e.wheelDeltaY/12;if(b>0)b=0;else if(b<a.maxScrollX)b=a.maxScrollX;if(c>0)c=0;else if(c<a.maxScrollY)c=a.maxScrollY;a.scrollTo(b,c,0)},_momentum:function(a,b,c,d,e){var f=this,deceleration=0.0006,speed=Math.abs(a)/b,newDist=(speed*speed)/(2*deceleration),newTime=0,outsideDist=0;if(a>0&&newDist>c){outsideDist=e/(6/(newDist/speed*deceleration));c=c+outsideDist;f.returnTime=800/e*outsideDist+100;speed=speed*c/newDist;newDist=c}else if(a<0&&newDist>d){outsideDist=e/(6/(newDist/speed*deceleration));d=d+outsideDist;f.returnTime=800/e*outsideDist+100;speed=speed*d/newDist;newDist=d}newDist=newDist*(a<0?-1:1);newTime=speed/deceleration;return{dist:newDist,time:Math.round(newTime)}},_offset:function(a,b){var c=-a.offsetLeft;var d=-a.offsetTop;if(!b)return{x:c,y:d};while(a=a.offsetParent){c-=a.offsetLeft;d-=a.offsetTop}return{x:c,y:d}},_snap:function(x,y){var a=this;var i;var l;var b;var c;var d;var e;b=a.pagesX.length-1;for(i=0,l=a.pagesX.length;i<l;i++){if(x>=a.pagesX[i]){b=i;break}}if(b==a.currPageX&&b>0&&a.dirX<0)b--;x=a.pagesX[b];d=Math.abs(x-a.pagesX[a.currPageX]);d=d?Math.abs(a.x-x)/d*500:0;a.currPageX=b;b=a.pagesY.length-1;for(i=0;i<b;i++){if(y>=a.pagesY[i]){b=i;break}}if(b==a.currPageY&&b>0&&a.dirY<0)b--;y=a.pagesY[b];e=Math.abs(y-a.pagesY[a.currPageY]);e=e?Math.abs(a.y-y)/e*500:0;a.currPageY=b;c=Math.round(Math.max(d,e))||200;return{x:x,y:y,time:c}},_bind:function(a,b){(b||this.scroller).addEventListener(a,this,false)},_unbind:function(a,b){(b||this.scroller).removeEventListener(a,this,false)},destroy:function(){var a=this;if(a.options.checkDOMChange)clearTimeout(a.DOMChangeInterval);if(a.pullDownToRefresh){a.pullDownEl.parentNode.removeChild(a.pullDownEl)}if(a.pullUpToRefresh){a.pullUpEl.parentNode.removeChild(a.pullUpEl)}a.hScrollbar=false;a.vScrollbar=false;a._scrollbar('h');a._scrollbar('v');a.scroller.style.webkitTransform='';a._unbind('webkitTransitionEnd');a._unbind($.UIResizeEvt);a._unbind($.UIStartEvt);a._unbind($.UIMoveEvt);a._unbind($.UIEndEvt);a._unbind($.UICancelEvt);if(a.options.zoom){a._unbind('gesturestart');a._unbind('gesturechange');a._unbind('gestureend');a._unbind('gesturecancel')}},refresh:function(){var a=this;var b=0;var c=0;var i;var l;var d;var e;var f;var g;if(a.pullDownToRefresh){g=a.pullDownEl.className.match('loading');if(g&&!a.contentReady){e=a.scrollerH;a.contentReady=true;a.pullDownEl.className='iScrollPullDown';a.pullDownLabel.innerText=a.options.pullDownLabel[0];a.offsetBottom=a.pullDownEl.offsetHeight;a.scroller.style.marginTop=-a.offsetBottom+'px'}else if(!g){a.offsetBottom=a.pullDownEl.offsetHeight;a.scroller.style.marginTop=-a.offsetBottom+'px'}}if(a.pullUpToRefresh){g=a.pullUpEl.className.match('loading');if(g&&!a.contentReady){e=a.scrollerH;a.contentReady=true;a.pullUpEl.className='iScrollPullUp';a.pullUpLabel.innerText=a.options.pullUpLabel[0];a.offsetTop=a.pullUpEl.offsetHeight;a.scroller.style.marginBottom=-a.offsetTop+'px'}else if(!g){a.offsetTop=a.pullUpEl.offsetHeight;a.scroller.style.marginBottom=-a.offsetTop+'px'}}a.wrapperW=a.wrapper.clientWidth;a.wrapperH=a.wrapper.clientHeight;a.scrollerW=Math.round(a.scroller.offsetWidth*a.scale);a.scrollerH=Math.round((a.scroller.offsetHeight-a.offsetBottom-a.offsetTop)*a.scale);a.maxScrollX=a.wrapperW-a.scrollerW;a.maxScrollY=a.wrapperH-a.scrollerH;a.dirX=0;a.dirY=0;a._transitionTime(0);a.hScroll=a.options.hScroll&&a.maxScrollX<0;a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH);a.hScrollbar=a.hScroll&&a.options.hScrollbar;a.vScrollbar=a.vScroll&&a.options.vScrollbar&&a.scrollerH>a.wrapperH;a._scrollbar('h');a._scrollbar('v');if(typeof a.options.snap=='string'){a.pagesX=[];a.pagesY=[];d=a.scroller.querySelectorAll(a.options.snap);for(i=0,l=d.length;i<l;i++){b=a._offset(d[i]);a.pagesX[i]=b.x<a.maxScrollX?a.maxScrollX:b.x*a.scale;a.pagesY[i]=b.y<a.maxScrollY?a.maxScrollY:b.y*a.scale}}else if(a.options.snap){a.pagesX=[];while(b>=a.maxScrollX){a.pagesX[c]=b;b=b-a.wrapperW;c++}if(a.maxScrollX%a.wrapperW)a.pagesX[a.pagesX.length]=a.maxScrollX-a.pagesX[a.pagesX.length-1]+a.pagesX[a.pagesX.length-1];b=0;c=0;a.pagesY=[];while(b>=a.maxScrollY){a.pagesY[c]=b;b=b-a.wrapperH;c++}if(a.maxScrollY%a.wrapperH)a.pagesY[a.pagesY.length]=a.maxScrollY-a.pagesY[a.pagesY.length-1]+a.pagesY[a.pagesY.length-1]}if(a.options.zoom){f=a._offset(a.wrapper,true);a.wrapperOffsetLeft=-f.x;a.wrapperOffsetTop=-f.y}if(e&&a.y==0){e=e-a.scrollerH+a.y;a.scrollTo(0,e,0)}a._resetPos()},scrollTo:function(x,y,a,b){var c=this;if(b){x=c.x-x;y=c.y-y}a=!a||(Math.round(c.x)==Math.round(x)&&Math.round(c.y)==Math.round(y))?0:a;c.moved=true;if(!c.options.HWTransition){c._timedScroll(x,y,a);return}if(a)c._bind('webkitTransitionEnd');c._transitionTime(a);c._pos(x,y);if(!a)setTimeout(function(){c._transitionEnd()},0)},scrollToElement:function(a,b){var c=this,pos;a=a.nodeType?a:c.scroller.querySelector(a);if(!a)return;pos=c._offset(a);pos.x=pos.x>0?0:pos.x<c.maxScrollX?c.maxScrollX:pos.x;pos.y=pos.y>0?0:pos.y<c.maxScrollY?c.maxScrollY:pos.y;b=b===undefined?Math.max(Math.abs(pos.x)*2,Math.abs(pos.y)*2):b;c.scrollTo(pos.x,pos.y,b)},scrollToPage:function(a,b,c){var d=this,x,y;if(d.options.snap){a=a=='next'?d.currPageX+1:a=='prev'?d.currPageX-1:a;b=b=='next'?d.currPageY+1:b=='prev'?d.currPageY-1:b;a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a;b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b;d.currPageX=a;d.currPageY=b;x=d.pagesX[a];y=d.pagesY[b]}else{x=-d.wrapperW*a;y=-d.wrapperH*b;if(x<d.maxScrollX)x=d.maxScrollX;if(y<d.maxScrollY)y=d.maxScrollY}d.scrollTo(x,y,c||400)},zoom:function(x,y,a){var b=this;var c=a/b.scale;x=x-b.wrapperOffsetLeft-b.x;y=y-b.wrapperOffsetTop-b.y;b.x=x-x*c+b.x;b.y=y-y*c+b.y;b.scale=a;if(b.options.onZoomStart)b.options.onZoomStart.call(b);b.refresh();b._bind('webkitTransitionEnd');b._transitionTime(200);setTimeout(function(){b.zoomed=true;b.scroller.style.webkitTransform=$.UITransOpen+b.x+'px,'+b.y+'px'+$.UITransClose+' scale('+a+')'},0)}};$.extend($,{UIScrollers:{},UIEnableScrolling:function(f){$.ready(function(){try{var c=$$("scrollpanel");var d=0;c.forEach(function(a){a.setAttribute("ui-scroller",$.UIUuid());var b=a.getAttribute("ui-scroller");$.UIScrollers[b]=new $.UIScroll(a.parentNode,f)})}catch(e){}})}});$.UIEnableScrolling({desktopCompatibility:true});$.extend($,{UIPaging:function(a,b){var c=new $.UIScroll(a,b);var d=null;if(a.nodeType===1){d=$("stack",a);a.parentNode.setAttribute("ui-scroller","myPager")}else{d=$("stack",$(a));a=$(a);a.parentNode.setAttribute("ui-scroller","myPager")}var e=d.children.length;var f=a.parentNode.css("width");var g='<stack ui-implements="indicators" style="width:"'+f+';">';for(var i=0;i<e;i++){if(i===0){g+='<indicator class="active"></indicator>'}else{g+="<indicator></indicator>"}}g+="</stack>";a.parentNode.parentNode.insert(g)}});$.ready(function(){if($("stack[ui-implements=paging]")){$.UIPaging("stack[ui-implements=paging] > panel",{snap:true,momentum:false,hScrollbar:false,onScrollEnd:function(){document.querySelector('stack[ui-implements="indicators"] > indicator.active').removeClass('active');document.querySelector('stack[ui-implements="indicators"] > indicator:nth-child('+(this.currPageX+1)+')').addClass('active')}})}});$.extend(HTMLElement.prototype,{UIExpander:function(a){a=a||{};var b=a.status||"expanded";var c=a.title||"Open";var d=a.altTitle||"Close";var e=this;var f=$("panel",this);var g="<header><label></label></header>";this.insert(g,"first");f.setAttribute("ui-height",parseInt(f.css("height"),10));if(b==="expanded"){e.toggleClass("ui-status-expanded","ui-status-collapsed");$("label",this).text(d);f.style.height=f.getAttribute("ui-height")+"px";f.css("{opacity: 1;}")}else{$("label",this).text(c);f.css("{height: 0px; opacity: 0;}");e.toggleClass("ui-status-collapsed","ui-status-expanded")}e.delegate("header","click",function(){alert("hi");if(f.style.height==="0px"){f.style.height=f.getAttribute("ui-height")+"px";f.style.opacity=1;$("label",this).text(d);e.toggleClass("ui-status-collapsed","ui-status-expanded")}else{f.css("{height: 0px; opacity: 0;}");$("label",this).text(c);e.toggleClass("ui-status-expanded","ui-status-collapsed")}})}});$.extend($,{UIDeletableTableCells:[],UIDeleteTableCell:function(b,c,d){this.deletionList=[];var e=$(b);var f=$(c);var g='<uibutton ui-bar-align="left" ui-implements="delete" class="disabled" style="display: none;"><label>Delete</label></uibutton>';var h='<uibutton ui-bar-align="right"  ui-implements="edit"><label>Edit</label></uibutton>';f.insertAdjacentHTML("afterBegin",g);f.insertAdjacentHTML("beforeEnd",h);var i='<deletedisclosure><span>&#x2713</span></deletedisclosure>';$$(b+" > tablecell").forEach(function(a){a.insertAdjacentHTML("afterBegin",i)});e.setAttribute("data-deletable-items",0);var j=function(){$(c+" > uibutton[ui-implements=edit]").bind("click",function(){if($("label",this).text()==="Edit"){this.UIToggleButtonLabel("Edit","Done");this.setAttribute("ui-implements","done");e.addClass("ui-show-delete-disclosures");this.parentNode.firstElementChild.style.display="-webkit-inline-box";if(/uibutton/i.test(f.children[1].nodeName)){f.children[1].css("display","none;")}$$("tablecell > img",e).forEach(function(a){a.css("{-webkit-transform: translate3d(40px, 0, 0)}")})}else{this.UIToggleButtonLabel("Edit","Done");this.removeAttribute("ui-implements");this.parentNode.firstElementChild.style.display="none";e.removeClass("ui-show-delete-disclosures");$$("deletedisclosure").forEach(function(a){a.removeClass("checked");a.ancestorByTag("tablecell").removeClass("deletable")});if(/uibutton/i.test(f.children[1].nodeName)){f.children[1].css("display","-webkit-inline-box;")}$("uibutton[ui-implements=delete]").addClass("disabled");$$("tablecell > img",e).forEach(function(a){a.css("{-webkit-transform: translate3d(0, 0, 0)}")})}})};var k=function(){$$("deletedisclosure").forEach(function(a){a.bind("click",function(){a.toggleClass("checked");a.ancestorByTag("tablecell").toggleClass("deletable");$("uibutton[ui-implements=delete]").removeClass("disabled");if(!a.ancestorByTag("tablecell").hasClass("deletable")){e.setAttribute("data-deletable-items",parseInt(e.data("deletable-items"),10)-1);if(parseInt(e.data("deletable-items"),10)===0){f.firstElementChild.addClass("disabled")}}else{e.data("deletable-items",parseInt(e.data("deletable-items"),10)+1)}})})};var l=function(){$("uibutton[ui-implements=delete]").bind("click",function(){if(this.hasClass("disabled")){return false}$$(".deletable").forEach(function(a){e.data("deletable-items",parseInt(e.data("deletable-items"),10)-1);$.UIDeletableTableCells.push(a.id);a.remove();if(!!d){d.call(this,a)}$.UIDeletableTableCells=[];e.setAttribute("data-deletable-items",0)});this.addClass("disabled");$.UIScrollers[$("scrollpanel",$(b).ancestor("view")).getAttribute("ui-scroller")].refresh()})};j();k();l()}});$.extend(HTMLElement.prototype,{UIScreenCover:function(){var a='<screencover ui-visible-state="hidden"></screencover>';if(!$("screencover")){this.insert(a)}}});$.extend($,{UISpinner:function(b){if(!!b.selector){var c=$(b.selector)}var d=null;var e=b.step;if(b.range.start>=0){var f=b.range.start||"";var g=b.range.end||"";var h=g-f;h++;var j=[];if(e){var k=((g-f)/e);if(b.range.start==0){j.push(0)}else{j.push(f)}for(var i=1;i<k;i++){j.push(j[i-1]+e)}j.push(j[j.length-1]+e)}else{for(var i=0,h;i<h;i++){j.push(f+i)}}}var l=(b.indicator==="plus")?"<icon class='indicator'></icon>":"<icon></icon>";var m=b.buttonClass?" class='"+b.buttonClass+"' ":"";var n="<uibutton "+m+"ui-implements='icon'>"+l+"</uibutton>";var o="<uibutton "+m+"ui-implements='icon'>"+l+"</uibutton>";var p=n+"<label ui-kind='spinner-label'></label><input type='text'/>"+o;c.insert(p);if(b.range.values){c.data("range-value",b.range.values.join(","))}if(!b.defaultValue){if(!!b.range.start||b.range.start==0){d=b.range.start==0?"0":b.range.start}else if(b.range.values instanceof Array){d=b.range.values[0];$("uibutton:first-of-type",b.selector).addClass("disabled")}}else{d=b.defaultValue}if(j){c.data("range-value",j.join(","))}$("label[ui-kind=spinner-label]",c).text(d);$("input",c).value=d;if(d==b.range.start){$("uibutton:first-of-type",c).addClass("disabled")}if(d==b.range.end){$("uibutton:last-of-type",c).addClass("disabled")}$("uibutton:first-of-type",b.selector).bind("click",function(a){$.decreaseSpinnerValue.call(this,b.selector)});$("uibutton:last-of-type",b.selector).bind("click",function(a){$.increaseSpinnerValue.call(this,b.selector)})},decreaseSpinnerValue:function(a){var b=$(a).data("range-value");b=b.split(",");var c=$("label",a).text().trim();var d=b.indexOf(c);if(d!==-1){$("uibutton:last-of-type",a).removeClass("disabled");$("[ui-kind=spinner-label]",a).text(b[d-1]);$("input",a).value=b[d-1];if(d===1){this.addClass("disabled")}}},increaseSpinnerValue:function(a){var b=$(a).data("range-value");b=b.split(",");var c=$("label",a).text().trim();var d=b.indexOf(c);if(d!==-1){$("uibutton:first-of-type",a).removeClass("disabled");$("label[ui-kind=spinner-label]",a).text(b[d+1]);$("input",a).value=b[d+1];if(d===b.length-2){this.addClass("disabled")}}}});$.extend($,{UIPopUpIsActive:null,UIPopUpIdentifier:null,UIPopUp:function(a){var b=null;if(a.selector){b=a.selector}else{return false}var c="Alert!";if(a.title){c=a.title}var d="";if(a.message){d=a.message}var f="Cancel";if(a.cancelUIButton){f=a.cancelUIButton}var g="Continue";if(a.continueUIButton){g=a.continueUIButton}var h='<popup ui-visible-state="hidden"><panel>';h+='<toolbar ui-placement="top"><h1>'+c+'</h1></toolbar>';h+='<p>'+d+'</p><toolbar ui-placement="bottom">';h+='<uibutton ui-kind="action" ui-implements="cancel"><label>'+f+'</label></uibutton>';h+='<uibutton ui-kind="action" ui-implements="continue"><label>'+g+'</label></uibutton></toolbar></panel></popup>';$(b).UIScreenCover();$(b).insertAdjacentHTML("beforeEnd",h);var j=document.querySelectorAll(b+" popup uibutton");for(var i=0,len=j.length;i<len;i++){j[i].addEventListener("click",function(e){e.preventDefault();$(b+" screencover").setAttribute("ui-visible-state","hidden");$(b+" popup").setAttribute("ui-visible-state","hidden")},false);$.UIPopUpIsActive=false;$.UIPopUpIdentifier=null;j[i].addEventListener("touchend",function(e){e.preventDefault();$(b+" screencover").setAttribute("ui-visible-state","hidden");$(b+" popup").setAttribute("ui-visible-state","hidden")},false);$.UIPopUpIsActive=false;$.UIPopUpIdentifier=null}if(a.callback){var k=b+" popup uibutton[ui-implements=continue]";$(k).addEventListener("click",function(){a.callback.call(a.callback,this)},false)}}});$.extend($,{UIPopUpIsActive:false,UIPopUpIdentifier:null,UIScreenCoverIdentifier:null,UIShowPopUp:function(a){var a=a;$.UIPopUpIsActive=true;$.UIPopUpIdentifier=a;var b=$(a+" screencover");$.UIScreenCoverIdentifier=b;b.addEventListener("touchmove",function(e){e.preventDefault()},false);$.UIPositionScreenCover(b);$.UIPositionPopUp(a);$(a+" screencover").setAttribute("ui-visible-state","visible");$(a+" popup").setAttribute("ui-visible-state","visible")},UIPositionScreenCover:function(a){a.cssText="height:"+(window.innerHeight+window.pageYOffset)+"px";var b=$($.UIPopUpIdentifier+" popup")},UIPositionPopUp:function(a){$.UIPopUpIsActive=true;$.UIPopUpIdentifier=a;var b=$(a+" popup");b.style.top=((window.innerHeight/2)+window.pageYOffset)-(b.clientHeight/2)+"px";b.style.left=(window.innerWidth/2)-(b.clientWidth/2)+"px"},UIRepositionPopupOnOrientationChange:function(){$.body.bind("orientationchange",function(){if(window.orientation===90||window.orientation===-90){if($.UIPopUpIsActive){$.UIPositionScreenCover($.UIScreenCoverIdentifier);$.UIPositionPopUp($.UIPopUpIdentifier)}}else{if($.UIPopUpIsActive){$.UIPositionScreenCover($.UIScreenCoverIdentifier);$.UIPositionPopUp($.UIPopUpIdentifier)}}});window.addEventListener("resize",function(){if($.UIPopUpIsActive){$.UIPositionScreenCover($.UIScreenCoverIdentifier);$.UIPositionPopUp($.UIPopUpIdentifier)}},false)}});$.ready(function(){$.UIRepositionPopupOnOrientationChange()});$.extend(HTMLElement.prototype,{UISelectionList:function(d){var e=$.collectionToArray(this.children);e.forEach(function(b){if(b.nodeName.toLowerCase()==="tablecell"){var c="<checkmark>&#x2713</checkmark>";b.insert(c);b.bind("click",function(){e.forEach(function(a){a.removeClass("selected")});this.addClass("selected");this.last().checked=true;if(d){d.call(d,this)}})}})}});$.extend(HTMLElement.prototype,{UICreateSwitchControl:function(a){var b,status,value,callback;var c=a.id;if(!a.customClass){b=""}else{b=' '+a.customClass}if(!!a.status){status=a.status}else{status="off"}if(!!a.value){value=a.value}else{value=""}if(!!a.callback){callback=a.callback}else{callback=function(){return false}}var d='<switchcontrol class="'+status+b+'" id="'+c+'"'+'" ui-value="'+value+'"><label ui-implements="on">ON</label><thumb></thumb><label ui-implements="off">OFF</label></switchcontrol>';if(this.css("position")!=="absolute"){this.css("{position: relative;}")}this.insert(d);var e="#"+c;this.addClass("ui-no-hover");$(e).bind("click",function(){this.UISwitchControl(callback)})}});$.extend(HTMLElement.prototype,{UISwitchControl:function(a){if(!a){var a=function(){return false}}if(this.nodeName.toLowerCase()==="switchcontrol"){a.call(a,this);if(this.hasClass("off")){this.toggleClass("on","off");this.checked=true}else{this.toggleClass("on","off");this.checked=false}}else{return false}}});$.extend(HTMLElement.prototype,{UIInitSwitchToggling:function(){$$("switchcontrol",this).forEach(function(a){a.parentNode.addClass("ui-no-hover");if(a.hasClass("on")){a.checked=true}else{a.checked=false}a.bind("click",function(e){this.parentNode.style.backgroundImage="none";e.preventDefault();this.UISwitchControl()})})}});$.ready(function(){$.app.UIInitSwitchToggling()});$.extend(HTMLElement.prototype,{UICreateSegmentedControl:function(a,b){var b=b||null;var c="<segmentedcontrol";if(a.id){c+=" id='"+a.id+"'"}if(a.placement){c+=" ui-bar-align='"+a.placement+"'"}if(a.selectedSegment){c+=" ui-selected-index='"+a.selectedSegment+"'"}else{c+=" ui-selected-index=''"}if(a.container){c+=" ui-segmented-container='#"+a.container+"'"}var d=a.cssClass||"";c+="'>";if(a.numberOfSegments){segments=a.numberOfSegments;var e=1;for(var i=0;i<segments;i++){c+="<uibutton";c+=" id='"+$.UIUuid()+"'";c+=" class='"+d[e-1];if(a.selectedSegment){if(a.selectedSegment===i){c+=" selected'"}}if(a.disabledSegment){if(a.disabledSegment===i){c+=" disabled'"}}c+="'";c+=" ui-kind='segmented'";if(a.placementOfIcons){c+=" ui-icon-alignment='"+a.placementOfIcons[e-1]+"'"}c+=">";if(a.iconsOfSegments){if(!!a.iconsOfSegments[i]){c+="<icon ui-implements='icon-mask' style='-webkit-mask-box-image: url(icons/"+a.iconsOfSegments[e-1]+"."+a.fileExtension[e-1]+")'  ui-implements='icon-mask'></icon>"}}if(a.titlesOfSegments){c+="<label>"+a.titlesOfSegments[e-1]+"</label>"}c+="</uibutton>";e++}c+="</segmentedcontrol>";if(b){this.insert(c,b)}else{this.insert(c)}$("#"+a.id).UISegmentedControl();if(a.container){if(a.selectedSegment){$(a.container).children[a.selectedSegment].css("{opacity: 1; z-index: "+a.numberOfSegments+"}")}else{$(a.container).children[0].css("{opacity: 1; z-index: "+a.numberOfSegments+"}")}}}}});$.extend(HTMLElement.prototype,{UISegmentedControl:function(l,m){var n=this;var m=m||null;var o=null;var l=l||function(){};var p=$.collectionToArray(this.children);var q=$(m);if(!this.hasAttribute('ui-selected-segment')){this.setAttribute("ui-selected-segment","")}if(this.getAttribute("ui-selected-index")){o=this.getAttribute("ui-selected-index");var r=this.children(o);try{r=r.getAttribute("id");this.setAttribute("ui-selected-segment",r);this.childred[o].addClass("selected")}catch(e){}}else{var s=-1;for(var i=0,len=this.children.length;i<len;i++){if(this.children[i].hasClass("selected")){this.setAttribute("ui-selected-index",i)}else{s++}}if(s===this.children.length-1){this.setAttribute("ui-selected-index",0);this.firstElementChild.addClass("selected")}}if(m){m=$(m);if(o){m.setAttribute("ui-selected-index",o)}else{m.setAttribute("ui-selected-index",0)}var t=$.collectionToArray(m.children);t.forEach(function(a){a.css("{opacity: 0; z-index: 1;}")});t[o].css("{opacity: 1; z-index: "+t.length+"}");n.setAttribute("ui-segmented-container",("#"+m.id));var u=this.getAttribute("ui-selected-index");var v=m.children[u].css("height");m.style.height=v}p.forEach(function(k){if(!k.hasAttribute("id")){k.setAttribute("id",$.UIUuid())}if(!n.getAttribute("ui-selected-segment")){if(k.hasClass("selected")){n.setAttribute("ui-selected-segment",k.getAttribute("id"))}}k.bind("click",function(){var a=n.getAttribute("ui-selected-segment");var b=n.getAttribute("ui-selected-index");var c=null;var d=null;var e=this.ancestor("segmentedcontrol");if(e.hasAttribute("ui-segmented-container")){d=e.getAttribute("ui-segmented-container")}var f=null;if(e.hasAttribute("ui-selected-index")){f=e.getAttribute("ui-selected-index")}var g=null;if(!a){g=this.getAttribute("ui-child-position");n.setAttribute("ui-selected-index",g);n.setAttribute("ui-selected-segment",this.getAttribute("id"));this.addClass("selected");c=this.getAttribute("ui-child-position");d.children[o].css("{opacity: 0; z-index: 1;}");d.children[c].css("{opacity: 0; z-index: "+o+"}")}if(a){g=this.getAttribute("ui-child-position");n.setAttribute("ui-selected-index",g);var h=$(("#"+a));h.removeClass("selected");n.setAttribute("ui-selected-segment",this.getAttribute("id"));this.addClass("selected");c=this.getAttribute("ui-child-position");if(n.getAttribute("ui-segmented-container")){var d=$(n.getAttribute("ui-segmented-container"));d.children(f).css("{opacity: 0; z-index: 1;}");d.children(g).css("{opacity: 1; z-index: 3;}");d.children[h.getAttribute("ui-child-position")].css("{z-index: 1;}");d.children[c].css("{z-index: "+d.children.length+"}");d.style.height=d.children[c].css("height");var i=d.ancestor("scrollpanel");var j=new $.UIScroll(i,{desktopCompatibility:true})}}this.addClass("selected");l.call(l,k)})});this.UIIdentifyChildNodes()}});$.ready(function(){$$("segmentedcontrol").forEach(function(a){if(a.getAttribute("ui-implements")!=="segmented-paging"){a.UISegmentedControl();var b=a.ancestor("scrollpanel").getAttribute("ui-scroller");$.UIScrollers[b].destroy();$.UIScrollers[b]=new $.UIScroll(a.ancestor("scrollpanel").parentNode)}})});$.extend(HTMLElement.prototype,{UISegmentedPagingControl:function(){var e=$("segmentedcontrol[ui-implements=segmented-paging]");var f=e.getAttribute("ui-paging");e.setAttribute("ui-paged-subview",0);e.first().addClass("disabled");var g=$$("subview",this);e.setAttribute("ui-pagable-subviews",g.length);var h=0;g.forEach(function(a){a.setAttribute("ui-navigation-status","upcoming");a.setAttribute("ui-child-position",h);h++;a.setAttribute("ui-paging-orient",f)});g[0].setAttribute("ui-navigation-status","current");e.delegate("uibutton","click",function(a){var b=a.ancestor("segmentedcontrol");if(a.isSameNode(a.parentNode.firstElementChild)){if(b.getAttribute("ui-paged-subview")===1){a.addClass("disabled");b.setAttribute("ui-paged-subview",0);g[0].setAttribute("ui-navigation-status","current");g[1].setAttribute("ui-navigation-status","upcoming")}else{g[b.getAttribute("ui-paged-subview")-1].setAttribute("ui-navigation-status","current");g[b.getAttribute("ui-paged-subview")].setAttribute("ui-navigation-status","upcoming");b.setAttribute("ui-paged-subview",b.getAttribute("ui-paged-subview")-1);a.next().removeClass("disabled");if(b.getAttribute("ui-paged-subview")==0){a.addClass("disabled")}}}else{var c=b.getAttribute("ui-pagable-subviews");var d=b.getAttribute("ui-paged-subview");if(b.getAttribute("ui-paged-subview")==c-1){a.addClass("disabled")}else{a.previous().removeClass("disabled");g[d].setAttribute("ui-navigation-status","traversed");g[++d].setAttribute("ui-navigation-status","current");b.setAttribute("ui-paged-subview",(d));if(b.getAttribute("ui-paged-subview")==c-1){a.addClass("disabled")}}}})}});$.extend(HTMLElement.prototype,{UICreateTabBar:function(a){var b=a.id||$.UIUuid();var c=a.imagePath||"icons\/";var d=a.numberOfTabs||1;var e=a.tabLabels;var f=a.iconsOfTabs;var g=a.selectedTab||0;var h=a.disabledTab||null;var j="<tabbar ui-selected-tab='"+g+"'>";this.setAttribute("ui-tabbar-id",b);for(var i=0;i<d;i++){j+="<uibutton ui-implements='tab' ";if(i===g||i===h){j+="class='";if(i===g){j+="selected"}if(i===h){j+="disabled"}j+="'"}j+="><icon style='-webkit-mask-box-image: url("+c;j+=f[i]+".svg);'></icon>";j+="<label>"+e[i]+"</label></uibutton>"}j+="</tabbar>";this.insert(j);var k=$$("subview",this);k[g].addClass("selected");this.UITabBar()},UITabBar:function(){var c=$$("tabbar > uibutton[ui-implements=tab]",this);$("tabbar",this).UIIdentifyChildNodes();var d=$("tabbar",this);var e=$$("subview",this);e.forEach(function(a){a.addClass("unselected")});var f=d.getAttribute("ui-selected-tab")||0;e[f].toggleClass("unselected","selected");c[f].addClass("selected");c.forEach(function(b){b.bind("click",function(){if(b.hasClass("disabled")||b.hasClass("selected")){return false}var a=b.ancestor("tabbar").getAttribute("ui-selected-tab");c[a].removeClass("selected");b.addClass("selected");e[a].removeClass("selected");e[a].addClass("unselected");e[b.getAttribute("ui-child-position")].addClass("selected");e[b.getAttribute("ui-child-position")].removeClass("unselected");d.setAttribute("ui-selected-tab",b.getAttribute("ui-child-position"))})})},UITabBarForViews:function(){var c=$$("tabbar > uibutton[ui-implements=tab]",this);$("tabbar",this).UIIdentifyChildNodes();var d=$("tabbar",this);var e=$$("view[ui-implements=tabbar-panel]",this);e.forEach(function(a){a.setAttribute("ui-navigation-status","upcoming")});var f=d.getAttribute("ui-selected-tab")||0;e[f].setAttribute("ui-navigation-status","current");c[f].addClass("selected");c.forEach(function(b){b.bind("click",function(){if(b.hasClass("disabled")||b.hasClass("selected")){return false}var a=b.ancestor("tabbar").getAttribute("ui-selected-tab");c[a].removeClass("selected");b.addClass("selected");e[a].setAttribute("ui-navigation-status","upcoming");e[b.getAttribute("ui-child-position")].setAttribute("ui-navigation-status","current");d.setAttribute("ui-selected-tab",b.getAttribute("ui-child-position"))})})}});$.extend(HTMLElement.prototype,{UIActionSheet:function(d){var e=this;var f=d.id;var g="undefined";if(!!d.color){g=d.color}$.body.UIScreenCover();var h=function(){var a="<actionsheet id='"+f+"' class='hidden' ui-contains='action-buttons'";if(g){a+=" ui-action-sheet-color='"+g+"'"}a+="><scrollpanel>";var b="",uiButtonObj,uiButtonImplements,uiButtonTitle,uiButtonCallback;if(!!d.uiButtons){for(var i=0,len=d.uiButtons.length;i<len;i++){uiButtonObj=d.uiButtons[i];b+="<uibutton ui-kind='action' ";uiButtonTitle=uiButtonObj["title"];uiButtonImplements=uiButtonObj["uiButtonImplements"]||"";uiButtonCallback=uiButtonObj["callback"];f.trim();f.capitalize();b+=' ui-implements="'+uiButtonImplements+'" class="stretch" onclick="'+uiButtonCallback+'(\'#'+f+'\')"><label>';b+=uiButtonTitle;b+="</label></uibutton>"}}a+=b+"<uibutton ui-kind='action' ui-implements='cancel' class='stretch' onclick='$.UIHideActionSheet(\"#"+f+"\")'><label>Cancel</label></uibutton></scrollpanel></actionsheet>";var c=$.make(a);e.insert(c,"last")};h();var j="#"+f+" uibutton";$$(j).forEach(function(a){a.bind("click",function(){$.UIHideActionSheet()})});var k=new $.UIScroll($("#"+f+" > scrollpanel"),{desktopCompatibility:true})}});$.extend($,{UIShowActionSheet:function(a){$.app.data("ui-action-sheet-id",a);window.scrollTo(0,1);var b=$("body > screencover");b.css("{ width: '"+window.innerWidth+"px; height: "+window.innerHeight+"px; }");b.setAttribute("ui-visible-state","visible");$(a).removeClass("hidden");b.addEventListener("touchmove",function(e){e.preventDefault()},false)},UIHideActionSheet:function(){var a=$.app.data("ui-action-sheet-id");$("screencover").setAttribute("ui-visible-state","hidden");try{$(a).addClass("hidden")}catch(e){}$.app.removeData("ui-action-sheet-id")},UIReadjustActionSheet:function(){var a="";if($.app.data("ui-action-sheet-id")){a=$.app.data("ui-action-sheet-id");if(!$.standalone){$(a).css("{ right: 0; bottom: -60px; left: 0;}")}else{$(a).css("{ right: 0; bottom: -10px; left: 0;}")}}}});document.addEventListener("orientationchange",function(){$.UIReadjustActionSheet()},false);$.extend(HTMLElement.prototype,{UIExpander:function(a){a=a||{};var b=a.status||"expanded";var c=a.title||"Open";var d=a.altTitle||"Close";var e=this;var f=$("panel",this);var g="<header><label></label></header>";this.insert(g,"first");f.setAttribute("ui-height",parseInt(f.css("height"),10));if(b==="expanded"){e.toggleClass("ui-status-expanded","ui-status-collapsed");$("label",this).text(d);f.style.height=f.getAttribute("ui-height")+"px";f.css("{opacity: 1;}")}else{$("label",this).text(c);f.css("{height: 0px; opacity: 0;}");e.toggleClass("ui-status-collapsed","ui-status-expanded")}$("header",e).bind("click",function(){if(f.style.height==="0px"){f.style.height=f.getAttribute("ui-height")+"px";f.style.opacity=1;$("label",this).text(d);e.toggleClass("ui-status-collapsed","ui-status-expanded")}else{f.css("{height: 0px; opacity: 0;}");$("label",this).text(c);e.toggleClass("ui-status-expanded","ui-status-collapsed")}})}});$.extend(HTMLElement.prototype,{UICalculateNumberOfLines:function(){var a=parseInt(this.css("line-height"),10);var b=parseInt(this.css("height"),10);var c=Math.floor(b/a);return c},UIParagraphEllipsis:function(){var a=this.UICalculateNumberOfLines();this.css("{-webkit-line-clamp:"+a+"}")}});$.extend(HTMLElement.prototype,{UIProgressBar:function(a){if(!a){var a={}}var b=a.className||false;var c=a.width||100;var d=a.speed||5;var e=a.position||"after";var f=a.margin||"10px auto";var g="<progressbar";if(b){g+=" class='"+b+"'"}g+=" style='width: "+c+"px;";g+=" -webkit-animation-duration: "+d+"s;";g+=" margin: "+f+";'";g+="></progressbar>";this.insert(g)},UIHideNavBarHeader:function(){this.css("{visibility: hidden; position: absolute;}")},UIShowNavBarHeader:function(){this.css("{visibility: visible; position: static;}")}});$.extend($,{UIAdjustToolBarTitle:function(){$$("navbar h1").forEach(function(a){var b=window.innerWidth;var c=0;var d=0;var e=0;a.previousElementSibling?c=a.previousElementSibling.clientWidth:c=0;a.nextElementSibling?d=a.nextElementSibling.clientWidth:d=0;if(c>d){e=c*2}else{e=d*2}if(e>0){if((b-e)<40){a.css("{display: none;}")}else{a.css("{display: block; width: "+(b-e-20)+"px;}")}}})}});document.addEventListener("DOMContentLoaded",function(){if(!$("splitview")){$.UIAdjustToolBarTitle()}},false);document.addEventListener("orientationchange",function(){if(!$("splitview")){$.UIAdjustToolBarTitle()}},false);window.addEventListener("resize",function(){if(!$("splitview")){$.UIAdjustToolBarTitle()}},false);$.UIActivityIndicator=function(){};$.extend($.UIActivityIndicator.prototype,{id:null,color:null,shadow:null,container:null,size:null,init:function(a){if(a){this.id=a.id||"UIActivityIndicator";this.color=a.color||"gray";if(!!a.shadow){this.shadow=a.shadow}this.container=a.container;this.size=a.size||"75%"}$(this.container).css("{ background-position: center 70%; background-repeat: no-repeat; background-image: -webkit-canvas("+this.id+"); background-size: "+this.size+" "+this.size+"}");this.context=document.getCSSCanvasContext("2d",this.id,37,37);this.context.lineWidth=3;this.context.lineCap="round";this.context.strokeStyle=this.color;if(this.shadow){this.context.shadowOffsetX=1;this.context.shadowOffsetY=1;this.context.shadowBlur=2;this.context.shadowColor=this.shadow}this.step=0;this.timer=null},draw:function(){this.context.clearRect(0,0,137,37);this.context.save();this.context.translate(18,18);this.context.rotate(this.step*Math.PI/180);for(var i=0;i<12;i++){this.context.rotate(30*Math.PI/180);this.drawLine(i)}this.context.restore();this.step+=30;if(this.step===360){this.step=0}},drawLine:function(i){this.context.beginPath();this.context.globalAlpha=i/12;this.context.moveTo(0,8+1);this.context.lineTo(0,16-1);this.context.stroke()},stop:function(){if(this.timer){this.context.clearRect(0,0,37,37);window.clearInterval(this.timer);this.timer=null}},animate:function(){if(this.timer){return}var a=this;this.timer=window.setInterval(function(){a.draw()},100)}});$.extend(HTMLElement.prototype,{UIInsertActivityIndicator:function(a){this.insert("<panel style='height: "+a.size+"; width: "+a.size+";"+a.style+"'></panel>");var b=new $.UIActivityIndicator();b.init(a);b.animate()}});$.extend($,{UICurX:null,UICurY:null,UISliderThumbWidth:null,UISliderValue:null,UISlider:function(b,c){var d=null;if(!c){var e=function(){}}else{var e=c.callback}if(c.startValue){d=c.startValue}var f=$(b).clientWidth;if(d){$("thumb",b).css("{left: "+d+"px;}");$(b).css("{background-size: "+(d+2)+"px 9px, 100% 9px;}")}$(b).setAttribute("ui-slider-length",f);if("createTouch"in document){var g=$(b+" > thumb");g.bind("touchmove",function(a){this.UISliderTouch(event);this.UIUpdateSliderTouch(e)})}else{$.UISliderForMouse(b,c)}}});$.extend(HTMLElement.prototype,{UISliderTouch:function(a){a.preventDefault();var b=this.parentNode.getAttribute("ui-slider-length");var c=a.touches[0];$.UICurX=c.pageX-this.parentNode.offsetLeft-$.UISliderThumbWidth;var d=this.css("width");d=parseInt(d,10);$.UISliderValue=$.UICurX+d;if($.UICurX<=0-(d/2)){$.UICurX=0-(d/2)}if($.UICurX>b-12){$.UICurX=b-12}},UIUpdateSliderTouch:function(a){if(!a){var a=function(){}}this.style.left=$.UICurX-$.UISliderThumbWidth+'px';a();this.parentNode.css("{-webkit-background-size:"+($.UICurX+1)+"px 9px, 100% 9px;}");this.parentNode.css("{background-size:"+($.UICurX+1)+"px 9px, 100% 9px;}")}});$.UIDrag={obj:null,init:function(a,b,c,d,e,f,g,h){a.onmousedown=$.UIDrag.start;a.hmode=g?false:true;a.vmode=h?false:true;a.root=b&&b!==null?b:a;if(a.hmode&&isNaN(parseInt(a.root.style.left),10)){a.root.style.left=a.root.css("left")}if(a.vmode&&isNaN(parseInt(a.root.style.top),10)){a.root.style.top=a.root.css("top")}if(!a.hmode&&isNaN(parseInt(a.root.style.right),10)){a.root.style.right=a.root.css("right")}if(!a.vmode&&isNaN(parseInt(a.root.style.bottom),10)){a.root.style.bottom=a.root.css("bottom")}a.minX=typeof c!=='undefined'?c:null;a.minY=typeof e!=='undefined'?e:null;a.maxX=typeof d!=='undefined'?d:null;a.maxY=typeof f!=='undefined'?f:null;a.root.onDragStart=new Function();a.root.onDragEnd=new Function();a.root.onDrag=new Function()},start:function(e){var a=$.UIDrag.obj=this;e=$.UIDrag.fixE(e);$.UIDrag.y=parseInt(a.vmode?a.root.style.top:a.root.style.bottom,10);$.UIDrag.x=parseInt(a.hmode?a.root.style.left:a.root.style.right,10);a.root.onDragStart($.UIDrag.x,$.UIDrag.y);a.lastMouseX=e.clientX;a.lastMouseY=e.clientY;if(a.hmode){if(a.minX!==null)a.minMouseX=e.clientX-$.UIDrag.x+a.minX;if(a.maxX!==null)a.maxMouseX=a.minMouseX+a.maxX-a.minX}else{if(a.minX!==null)a.maxMouseX=-a.minX+e.clientX+$.UIDrag.x;if(a.maxX!==null)a.minMouseX=-a.maxX+e.clientX+$.UIDrag.x}if(a.vmode){if(a.minY!==null)a.minMouseY=e.clientY-$.UIDrag.y+a.minY;if(a.maxY!==null)a.maxMouseY=a.minMouseY+a.maxY-a.minY}else{if(a.minY!==null)a.maxMouseY=-a.minY+e.clientY+$.UIDrag.y;if(a.maxY!==null)a.minMouseY=-a.maxY+e.clientY+$.UIDrag.y}document.onmousemove=$.UIDrag.drag;document.onmouseup=$.UIDrag.end;return false},drag:function(e){e=$.UIDrag.fixE(e);var a=$.UIDrag.obj;var b=e.clientY;var c=e.clientX;$.UIDrag.y=parseInt(a.vmode?a.root.style.top:a.root.style.bottom,10);$.UIDrag.x=parseInt(a.hmode?a.root.style.left:a.root.style.right,10);var d,ny;if(a.minX!==null)c=a.hmode?Math.max(c,a.minMouseX):Math.min(c,a.maxMouseX);if(a.maxX!==null)c=a.hmode?Math.min(c,a.maxMouseX):Math.max(c,a.minMouseX);if(a.minY!==null)b=a.vmode?Math.max(b,a.minMouseY):Math.min(b,a.maxMouseY);if(a.maxY!==null)b=a.vmode?Math.min(b,a.maxMouseY):Math.max(b,a.minMouseY);d=$.UIDrag.x+((c-a.lastMouseX)*(a.hmode?1:-1));ny=$.UIDrag.y+((b-a.lastMouseY)*(a.vmode?1:-1));$.UICurX=d;$.UISliderValue=d+(Math.round($.UISliderThumbWidth));$.UICurY=ny;$.UIDrag.obj.root.style[a.hmode?"left":"right"]=d+"px";$.UIDrag.obj.root.style[a.vmode?"top":"bottom"]=ny+"px";$.UIDrag.obj.lastMouseX=c;$.UIDrag.obj.lastMouseY=b;$.UIDrag.obj.root.onDrag(d,ny);$.UIDrag.updateSliderProgressIndicator($.UICurX);return false},end:function(){document.onmousemove=null;document.onmouseup=null;$.UIDrag.obj.root.onDragEnd(parseInt($.UIDrag.obj.root.style[$.UIDrag.obj.hmode?"left":"right"],10),parseInt($.UIDrag.obj.root.style[$.UIDrag.obj.vmode?"top":"bottom"],10));$.UIDrag.obj=null},fixE:function(e){if(typeof e.elemX==='undefined')e.elemX=e.offsetX;if(typeof e.elemY==='undefined')e.elemY=e.offsetY;return e},updateSliderProgressIndicator:function(){$.UIDrag.obj.parentNode.css("{-webkit-background-size:"+($.UICurX+1)+"px 9px, 100% 9px;}");$.UIDrag.obj.parentNode.css("{background-size:"+($.UICurX+1)+"px 9px, 100% 9px;}")}};$.extend($,{UISliderForMouse:function(a,b){if(!b){var b={}}var c=$("thumb",a);var d=$(a);var e=parseInt(c.css("width"),10);var f=parseInt(d.css("width"),10);var g=parseInt(d.css("height"),10);var h=parseInt(d.css("padding-right"),10);var i=parseInt(d.css("border-right-width"),10);f-=h;f-=i;f-=$.UISliderThumbWidth;var j=Math.round(e/2);$.UISliderThumbWidth=j;var k=(0-$.UISliderThumbWidth);$.UIDrag.init(c,null,-$.UISliderThumbWidth,f-(Math.round(e/2)),b["top"],b["top"]);c.onDrag=function(){if(b.callback){b.callback();d.UIUpdateSliderTouch()}this.style.top=-g+"px"}}});$.extend(HTMLElement.prototype,{UISetTranstionType:function(a){this.setAttribute("ui-transition-type",a)},UIFlipSubview:function(a){var b=this.ancestor("view");b.UISetTranstionType("flip-"+a);this.bind("click",function(){switch(a){case"right":$("subview:nth-of-type(1)",b).toggleClass("flip-right-front-in","flip-right-front-out");$("subview:nth-of-type(2)",b).toggleClass("flip-right-back-in","flip-right-back-out");break;case"left":$("subview:nth-of-type(1)",b).toggleClass("flip-left-front-in","flip-left-front-out");$("subview:nth-of-type(2)",b).toggleClass("flip-left-back-in","flip-left-back-out");break;case"top":$("subview:nth-of-type(2)",b).toggleClass("flip-top-front-in","flip-top-front-out");$("subview:nth-of-type(1)",b).toggleClass("flip-top-back-in","flip-top-back-out");break;case"bottom":$("subview:nth-of-type(2)",b).toggleClass("flip-bottom-front-in","flip-bottom-front-out");$("subview:nth-of-type(1)",b).toggleClass("flip-bottom-back-in","flip-bottom-back-out");break;default:$("subview:nth-of-type(1)",b).toggleClass("flip-right-front-in","flip-right-front-out");$("subview:nth-of-type(2)",b).toggleClass("flip-right-back-in","flip-right-back-out")}})},UIPopSubview:function(){var a=this.ancestor("view");a.UISetTranstionType("pop");this.bind("click",function(){$("subview:nth-of-type(2)",a).toggleClass("pop-in","pop-out")})},UIFadeSubview:function(){var a=this.ancestor("view");a.UISetTranstionType("fade");a.setAttribute("ui-transition-type","fade");this.bind("click",function(){$("subview:nth-of-type(2)",a).toggleClass("fade-in","fade-out")})},UISpinSubview:function(a){var b=this.ancestor("view");b.UISetTranstionType("spin");if(!a||a==="left"){this.UISetTranstionType("left");this.bind("click",function(){$("subview:nth-of-type(2)",b).toggleClass("spin-left-in","spin-left-out")})}else if(a==="right"){this.UISetTranstionType("right");this.bind("click",function(){$("subview:nth-of-type(2)",b).toggleClass("spin-right-in","spin-right-out")})}else{this.UISetTranstionType("left");this.bind("click",function(){$("subview:nth-of-type(2)",b).toggleClass("spin-left-in","spin-left-out")})}}});$.ready(function(){$.extend($,{UISplitViewScroller1:null,UISplitViewScroller2:null,body:$("body"),rootview:$("rootview"),resizeEvt:('onorientationchange'in window?'orientationchange':'resize'),UISplitView:function(){$.UISplitViewScroller1=new $.UIScroll('#scroller1 > scrollpanel');$.UISplitViewScroller2=new $.UIScroll('#scroller2 > scrollpanel');var a=$("rootview > panel > view[ui-navigation-status=current] > navbar").text();$("detailview > navbar").insert("<uibutton id ='showRootView'  class='navigation' ui-bar-align='left'>"+a+"</uibutton>","first");if(window.innerWidth>window.innerHeight){$.body.className="landscape";$.rootview.css("{display: block; height: 100%; margin-bottom: 1px;}");$("#scroller1").css("overflow: hidden; {height: "+($.rootview.innerHeight-45)+"px;}")}else{$.body.className="portrait";$.rootview.css("{display: none; height: "+(window.innerHeight-100)+"px;}");$("#scroller1").css("{overflow: hidden; height: "+(window.innerHeight-155)+"px;}")}},UISetSplitviewOrientation:function(){if($.resizeEvt){if(window.innerWidth>window.innerHeight){$.body.className="landscape";$.rootview.css("{display: block; height: 100%; margin-bottom: 1px;}");$("#scroller1").css("{overflow: hidden; height: 100%;}")}else{$.body.className="portrait";$.rootview.css("{display: none; height: "+(window.innerHeight-100)+"px;}");$("#scroller1").css("{overflow: hidden; height:"+(window.innerHeight-155)+"px;}")}}},UIToggleRootView:function(){if($.rootview.style.display==="none"){$.rootview.css("{display: block;}");$.UISplitViewScroller1.destroy();$.UISplitViewScroller2.destroy();$.UISplitViewScroller1=new $.UIScroll('#scroller1 > scrollpanel');$.UISplitViewScroller2=new $.UIScroll('#scroller2 > scrollpanel')}else{$.rootview.style.display="none";$.UISplitViewScroller1.destroy();$.UISplitViewScroller2.destroy();$.UISplitViewScroller1=new $.UIScroll('#scroller1 > scrollpanel');$.UISplitViewScroller2=new $.UIScroll('#scroller2 > scrollpanel')}},UICheckForSplitView:function(){if($("splitview")){$.UISplitView();$("#showRootView").bind("click",function(){$.UIToggleRootView()});$.body.onorientationchange=function(){$.UISetSplitviewOrientation()};window.onresize=function(){$.UISetSplitviewOrientation()}}}});$.UICheckForSplitView()});